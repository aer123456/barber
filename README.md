# project name: barber
# created by huguantao 2015.11
# 项目概述：
# 1: 项目名称：线上理发店
# 2: 该项目分为两版: PC 移动,分别对应两个不同的视图，功能相同。
# 3: 功能实现：
#   a）店家：查看店中已注册的用户以及用户的各种相信信息，拥有对已注册会员的所有操作权限；
#            展示理发店信息，店里最热发行，最近流行的发型；
#            查看会员和非会员的预约情况，并可以选择接受或者拒绝预约，可以查看所有预约的排期和安排。
#   b）用户：
#           会员：注册称为会员之后，可以享有先于会员的预约权、查看最新发型并预约；
#                 充值、线上预约、线上消费、取消预约、修改密码、查看其他的预约情况。
#           非会员：非会员也可在理发店进行预约，但是没有保障权，可能会被会员插队，可以查看理发店的各种信息。
# 4: 基本解决方案：
#           代码编写维护：github ＋ sublime；
#           调试工具：supervisor ＋ Googlechrome ＋ohmyzsh；
#           后端处理：nodejs的express框架； 数据库：redis；
#           视图：jade＋stylus；            数据交互：javascript、jquery＋ajax。
#           构建工具：fis3（百度集成方案）
#           http：session机制。原理：http://www.cnblogs.com/chenchenluo/p/4197181.html
# 5: 技术选择原因：
#           a) 随着nodejs的兴起，前端开发人员也可以用javascript进行后台开发，这大大降低了开发成本和沟通成本；
#           b) 而且nodejs本身也是一个MVC框架，前后端分离的思想会让开发人员可以更加专注于当前的后台／前端开发；
#           c) javascript的useragent可以让nodejs轻松判断pc／移动端，从而轻松分别进行视图渲染，而不必重复开发；
#              flexible和zepto也让移动端性能更佳，pc端利用bootstrap布局也能做到响应式布局
#  			  （这次没有使用的原因是工程本身比较小并且bootstrap本身千篇一律）
#           d）nodejs本身对于高并发非常合适，并且对服务器要求很低。
#           e) redis作为一个非关系型数据库，在小型工程中实用性很好。
#           f）jade和stylus相对于传统的html和css来说，更加简洁容易开发，而且都具有编程功能，在枚举展示数据方面更加方便，
# 			  不需要以前那种需要用javascript才能渲染。
#  			g）fis3是百度的前端资源解决方案，提供资源打包、压缩、合并、编译、MD5化，从而提升网站性能。
# 6: 具体实现：
# 			a）用户的注册、登录、充值、预约、取消预约，店家的查看会员列表、查看各种预约情况，均通过页面发送http请求
#             传给后台相关路由进行处理，利用nodejs的redis组件进行数据的增删改查，完成之后直接在后台进行试图渲染。
#  			b）相关页面跳转：通过ajax方式进行后台访问之后，取出相关返回数据，并根据相关情况决定下一步流程。	
#           c）通过session进行http会话，从而避免ajax的http只能进行单次路由访问和单个路由的数据传送。
#           d) 数据表：customer_list：所有用户ID的合集，用于店家查看信息时的索引。
#    				  一个hash队列：以userId 作为唯一索引，存储用户及其账户所有信息。
# 7: 实现进度：
#  			a）业务流程： 100%，相关流程见原型图和相关文档说明。
#           b）视图：pc：100%、 移动端：开发中。
# 			c）后台处理：登录、注册、修改密码、充值：100%； 预约、取消预约等：开发中； 店家方面的路由：相对简单，略。
# 			d）构建：fis3构建，相对简单，略。
# 8: 遇到困难：
#           a) 对session机制不够了解，目前对nodejs中的session组件使用不熟练，目前使用全局变量代替session，后续会替换。
#           b）当开开发越来越多功能之后，需要对后端程序进行重构；
#              各个路由和一些可复用的方法需要封装和模块化，目前代码由于时间问题，可维护性和可观赏性不够。
#           c) 网站性能优化问题，访问速度和维护性。
